<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Insert title here</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" th:href="@{/css/output.css}" />
    <!-- for live server[no springboot running] -->
    <link
      rel="stylesheet"
      href="/Capstone1/Capstone-1/src/main/resources/static/css/output.css"
    />
  </head>
  <body>
    <div>
      <div th:if="${!session.initialChangePass}" class="bg-red-700">
        <p>Hello</p>
      </div>
      <p>Applicant Home</p>
      <div sec:authorize="isAuthenticated()">
        Welcome, <span th:text="${session.username}"></span>!
        <div>Id: <span th:text="${session.id}"></span></div>
        <div class="progress-container">
          <img th:src="@{/icons/inoffice.svg}" />
        </div>
        <div>
          <div>Application Status:</div>
          <div>Pending...</div>
        </div>
      </div>
      <div>
        <form th:action="@{/logout}" method="POST">
          <button>Logout</button>
        </form>
      </div>
    </div>
    <div
      tabindex="-1"
      role="dialog"
      class="modal flex w-full backdrop-blur-sm"
      style="backdrop-filter: blur(3px)"
    >
      <div
        class="modal-dialog modal-lg h-3/5 self-center flex w-full"
        role="document"
      >
        <div class="modal-content bg-customyellow">
          <div>
            <button
              type="button"
              class="close w-8 hover:text-white"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div>
            <h5
              class="modal-title w-full text-center font-primary text-3xl mb-6 mt-10"
            >
              Change Password
            </h5>
          </div>
          <div class="modal-body flex justify-center relative">
            <img
              th:src="@{/images/plane.png}"
              src="/Capstone1/Capstone-1/src/main/resources/static/images/plane.png"
              class="fixed mix-blend-overlay h-64 bottom-0 sm:fixed pointer-events-none top-72 right-1/4 mr-6 mt-16"
            />
            <form th:action="@{/applicant/change-password}" method="POST">
              <div>
                <input
                  type="password"
                  placeholder="Enter current password"
                  name="currentPassword"
                  class="indent-2 rounded-md h-12 w-80 mb-6"
                />
                <div th:if="*{error != null}">
                  <div
                    th:each="err : *{error.currentPasswordError}"
                    th:text="${err}"
                  ></div>
                </div>
                <input
                  type="password"
                  placeholder="Enter new password"
                  name="newPassword"
                  class="indent-2 rounded-md h-12 w-80 mb-6"
                />
                <div th:if="*{error != null}">
                  <div
                    th:each="err : *{error.newPasswordError}"
                    th:text="${err}"
                  ></div>
                </div>
                <input
                  type="password"
                  placeholder="Enter confirm password"
                  name="confirmPassword"
                  class="indent-2 rounded-md h-12 w-80 mb-6"
                />
                <div th:if="*{error != null}">
                  <div
                    th:each="err : *{error.confirmPasswordError}"
                    th:text="${err}"
                  ></div>
                </div>
                <div class="rounded-3xl w-60 m-auto">
                  <button
                    class="hover:text-black text-gray-50 border border-black font-secondary h-12 w-60 rounded-3xl hover:bg-yellow-400 bg-gray-950"
                  >
                    Confirm
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script th:inline="javascript">
      if (/*[[${!session.initialChangePass}]]*/ "") {
        $(".modal").modal("show");
      } else {
        $(".modal").remove();
      }
    </script>
  </body>
</html>
